syntax = "proto3";

package neurospider.crawl;

service CrawlService {
  rpc StartCrawl(CrawlRequest) returns (CrawlResponse);
  rpc GetCrawlStatus(StatusRequest) returns (StatusResponse);
  rpc StopCrawl(StopRequest) returns (StopResponse);
}

message CrawlRequest {
  string url = 1;
  CrawlConfig config = 2;
}

message CrawlConfig {
  int32 max_depth = 1;
  int32 max_pages = 2;
  repeated string allowed_domains = 3;
}

message CrawlResponse {
  string job_id = 1;
  string status = 2;
}

message StatusRequest {
  string job_id = 1;
}

message StatusResponse {
  string job_id = 1;
  string status = 2;
  int32 pages_crawled = 3;
  int32 pages_pending = 4;
}

message StopRequest {
  string job_id = 1;
}

message StopResponse {
  string job_id = 1;
  bool stopped = 2;
}
